--- a/src/corelib/plugin/qelfparser_p.cpp
+++ b/src/corelib/plugin/qelfparser_p.cpp
@@ -387,7 +387,9 @@ Q_DECL_UNUSED Q_DECL_COLD_FUNCTION stati
     case EM_ALPHA:      d << ", Alpha"; break;
     case EM_68K:        d << ", MC68000"; break;
     case EM_ARM:        d << ", ARM"; break;
+#ifdef EM_AARCH64
     case EM_AARCH64:    d << ", AArch64"; break;
+#endif
 #ifdef EM_BLACKFIN
     case EM_BLACKFIN:   d << ", Blackfin"; break;
 #endif
--- a/src/3rdparty/forkfd/forkfd.c
+++ b/src/3rdparty/forkfd/forkfd.c
@@ -605,7 +605,7 @@ static int forkfd_fork_fallback(int flags, pid_t *ppid)
     int death_pipe[2];
     int sync_pipe[2];
     int ret;
-#ifdef __linux__
+#ifdef HAVE_EVENTFD
     int efd;
 #endif
 
