#
# Copyright (C) 2008-2014 The LuCI Team <luci@lists.subsignal.org>
#
# This is free software, licensed under the Apache License, Version 2.0 .
#

include $(TOPDIR)/rules.mk

PKG_NAME:=luci-app-npsvip
PKG_VERSION:=1.0
PKG_RELEASE:=0

PKG_LICENSE:=Apache-2.0

LUCI_TITLE:=LuCI support for Npc
LUCI_DEPENDS:=+libc
LUCI_PKGARCH:=all

define Package/$(PKG_NAME)/conffiles
/etc/config/npsvip
/etc/conf/npsvip.conf
endef

ifeq ($(ARCH),aarch64)
	$(INSTALL_BIN) ./bin/arm64 $(1)/usr/bin/npsvip
endif

ifeq ($(ARCH),arm)
	$(INSTALL_BIN) ./bin/armv7 $(1)/usr/bin/npsvip
endif

ifeq ($(BOARD),bcm53xx)
	$(INSTALL_BIN) ./bin/armv6 $(1)/usr/bin/npsvip
ifeq ($(word 2,$(subst +,$(space),$(call qstrip,$(CONFIG_CPU_TYPE)))),)
	$(INSTALL_BIN) ./bin/armv5 $(1)/usr/bin/npsvip
endif
endif

ifeq ($(BOARD),kirkwood)
	$(INSTALL_BIN) ./bin/armv5 $(1)/usr/bin/npsvip
endif

ifeq ($(ARCH),i386)
	$(INSTALL_BIN) ./bin/i386 $(1)/usr/bin/npsvip
endif

ifeq ($(ARCH),mips)
	$(INSTALL_BIN) ./bin/mips $(1)/usr/bin/npsvip
endif
	
ifeq ($(ARCH),mipsel)
	$(INSTALL_BIN) ./bin/mipsle $(1)/usr/bin/npsvip
endif

ifeq ($(ARCH),x86_64)
	$(INSTALL_BIN) ./bin/x86_64 $(1)/usr/bin/npsvip
endif

include $(TOPDIR)/feeds/luci/luci.mk

# call BuildPackage - OpenWrt buildroot signature
